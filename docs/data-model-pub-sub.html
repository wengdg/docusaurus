<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Pub-Sub Caching · RadGrad</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The client and server in traditional web applications communicate using a &quot;request-response&quot; design pattern. RadGrad is implemented using Meteor, which uses a different communication design pattern called &quot;publish-subscribe&quot; (often abbreviated to &quot;pub-sub&quot;).  The basic difference between the two patterns is that with request-response, the client must always make an explicit request to &quot;pull&quot; data from the server, while publish-subscribe enables the server to &quot;push&quot; data to the client. For details on the way Meteor implements pub-sub, please see the [Meteor Guide chapter on Publications and data loading](https://guide.meteor.com/data-loading.html)."/><meta property="og:title" content="Pub-Sub Caching · RadGrad"/><meta property="og:type" content="website"/><meta property="og:url" content="https://radgrad.github.io/docusaurus/index.html"/><meta property="og:description" content="The client and server in traditional web applications communicate using a &quot;request-response&quot; design pattern. RadGrad is implemented using Meteor, which uses a different communication design pattern called &quot;publish-subscribe&quot; (often abbreviated to &quot;pub-sub&quot;).  The basic difference between the two patterns is that with request-response, the client must always make an explicit request to &quot;pull&quot; data from the server, while publish-subscribe enables the server to &quot;push&quot; data to the client. For details on the way Meteor implements pub-sub, please see the [Meteor Guide chapter on Publications and data loading](https://guide.meteor.com/data-loading.html)."/><meta property="og:image" content="https://radgrad.github.io/docusaurus/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://radgrad.github.io/docusaurus/img/docusaurus.png"/><link rel="shortcut icon" href="/docusaurus/img/radgrad.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://radgrad.github.io/docusaurus/blog/atom.xml" title="RadGrad Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://radgrad.github.io/docusaurus/blog/feed.xml" title="RadGrad Blog RSS Feed"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/docusaurus/css/main.css"/></head><body class="sideNavVisible doc separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docusaurus/"><img class="logo" src="/docusaurus/img/radgrad_logo.png" alt="RadGrad"/><h2 class="headerTitleWithLogo">RadGrad</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://radgrad.ics.hawaii.edu" target="_self">radgrad.ics.hawaii.edu</a></li><li class="siteNavGroupActive"><a href="/docusaurus/docs/intro-motivation.html" target="_self">documentation</a></li><li class=""><a href="/docusaurus/blog" target="_self">news</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Data Model</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/docusaurus/docs/intro-motivation.html">Motivation</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/intro-goals.html">Goals</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/intro-about.html">About this manual</a></li></ul></div><div class="navGroup navGroupActive"><h3>Developer Guide</h3><ul><li class="navListItem"><a class="navItem" href="/docusaurus/docs/developer-guide-installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/developer-guide-ide.html">IDE Setup</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/developer-guide-source-code-organization.html">Source code organization</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/developer-guide-coding-standards.html">Coding Standards</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/developer-guide-testing.html">Testing</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/developer-guide-admin-datamodel-ui.html">Admin Data Model UI</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/developer-guide-database-fixtures.html">Database Fixtures</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/developer-guide-continuous-integration.html">Continuous Integration</a></li></ul></div><div class="navGroup navGroupActive"><h3>Data Model</h3><ul><li class="navListItem"><a class="navItem" href="/docusaurus/docs/data-model-overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/data-model-class-hierarchy.html">Class Hierarchy</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/data-model-entity-relationship-model.html">Entity-Relationship Model</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/data-model-user-management.html">User Management</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/data-model-ice.html">ICE (Innovation, Competency, Experience)</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/data-model-dump-restore.html">Database Dump-Restore</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docusaurus/docs/data-model-pub-sub.html">Pub-Sub Caching</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/data-model-integrity-checking.html">Integrity Checking</a></li></ul></div><div class="navGroup navGroupActive"><h3>API</h3><ul><li class="navListItem"><a class="navItem" href="/docusaurus/docs/api-javascript-jsdocs.html">Javascript</a></li></ul></div><div class="navGroup navGroupActive"><h3>Documentation</h3><ul><li class="navListItem"><a class="navItem" href="/docusaurus/docs/documentation-docusaurus.html">Docusaurus</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/documentation-jsdoc.html">JSDoc</a></li></ul></div><div class="navGroup navGroupActive"><h3>Delivery</h3><ul><li class="navListItem"><a class="navItem" href="/docusaurus/docs/delivery-scripts.html">Development scripts</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/delivery-deployment.html">Deployment</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/delivery-cas.html">CAS Authentication</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/delivery-cloudinary.html">Cloudinary Image Service</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/delivery-star-bulk-download.html">Importing bulk STAR data</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/delivery-level-calculation.html">Level Calculation</a></li></ul></div><div class="navGroup navGroupActive"><h3>Analytics</h3><ul><li class="navListItem"><a class="navItem" href="/docusaurus/docs/analytics-overview.html">Overview</a></li></ul></div><div class="navGroup navGroupActive"><h3>Archive</h3><ul><li class="navListItem"><a class="navItem" href="/docusaurus/docs/archive-use-cases.html">Use Cases (Fall 2016)</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/archive-beta-test.html">Beta Test (Spring 2017)</a></li><li class="navListItem"><a class="navItem" href="/docusaurus/docs/archive-radgrad-registration.html">RadGrad Registration</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Pub-Sub Caching</h1></header><article><div><span><p>The client and server in traditional web applications communicate using a &quot;request-response&quot; design pattern. RadGrad is implemented using Meteor, which uses a different communication design pattern called &quot;publish-subscribe&quot; (often abbreviated to &quot;pub-sub&quot;).  The basic difference between the two patterns is that with request-response, the client must always make an explicit request to &quot;pull&quot; data from the server, while publish-subscribe enables the server to &quot;push&quot; data to the client. For details on the way Meteor implements pub-sub, please see the <a href="https://guide.meteor.com/data-loading.html">Meteor Guide chapter on Publications and data loading</a>.</p>
<p>The point of this section is to note that the default approach to pub-sub in Meteor is on a page-by-page loading basis. In other words, each time a client visits a page, as part of the page loading process, the client creates one or more subscriptions representing all of the data needed for that page, which the server then sends to the client.  Each time the client leaves a page, all current subscriptions are terminated and the associated data is discarded from the client.</p>
<p>The advantage of the default approach is simplicity and minimization of the data held by the client at any given time. The disadvantage is that if two pages involve the exact same set of subscriptions, and the client navigates from one of these pages to the other, then the default approach results in data being sent to the client for first page, then discarded when the client leaves that page, only to have the server resend the exact same data to the client when the second page is loaded.</p>
<p>Upon deploying RadGrad for the first time, we discovered that page were loading slowly and that much of this latency was due to the overhead of subscribing and unsubscribing each time the client visited a new page.  To solve this problem, RadGrad leverages the <a href="https://github.com/kadirahq/subs-manager">MeteorHacks SubsManager</a> package, which provides the ability to cache subscription data on the client side.</p>
<p>Our implementation of subscription caching is accomplished by three global templates:</p>
<ul>
<li><p>with-global-subscriptions (<a href="https://github.com/radgrad/radgrad/blob/master/app/imports/ui/layouts/shared/with-global-subscriptions.html">html</a>, <a href="https://github.com/radgrad/radgrad/blob/master/app/imports/ui/layouts/shared/with-global-subscriptions.js">js</a>) creates cached subscriptions to approximately 20 RadGrad collections. These are collections that are frequently used by most users on most pages, and so it makes sense to just subscribe to them as soon as any user logs in and cache those subscriptions across all pages.</p></li>
<li><p>with-instance-subscriptions (<a href="https://github.com/radgrad/radgrad/blob/master/app/imports/ui/layouts/shared/with-instance-subscriptions.html">html</a>, <a href="https://github.com/radgrad/radgrad/blob/master/app/imports/ui/layouts/shared/with-instance-subscriptions.js">js</a>) creates cached subscriptions to data specific to a given user which is used across multiple pages, such as their course or opportunity instances.</p></li>
<li><p>with-advisor-subscriptions (<a href="https://github.com/radgrad/radgrad/blob/master/app/imports/ui/layouts/shared/with-advisor-subscriptions.html">html</a>, <a href="https://github.com/radgrad/radgrad/blob/master/app/imports/ui/layouts/shared/with-advisor-subscriptions.js">js</a>) creates cached subscriptions for data used only by the advisor (i.e. plan choices).</p></li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="data-model-dump-restore.html">← Database Dump-Restore</a><a class="docs-next button" href="data-model-integrity-checking.html">Integrity Checking →</a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/docusaurus/" class="nav-home"><img src="/docusaurus/img/radgrad_logo.png" alt="RadGrad" width="66" height="58"/></a><div><h5>Guided Tours</h5><a href="https://radgrad.ics.hawaii.edu/guidedtour/student" target="_blank" rel="noreferrer noopener">For students</a><a href="https://radgrad.ics.hawaii.edu/guidedtour/advisor" target="_blank" rel="noreferrer noopener">For advisors</a><a href="https://radgrad.ics.hawaii.edu/guidedtour/faculty" target="_blank" rel="noreferrer noopener">For faculty</a><a href="https://radgrad.ics.hawaii.edu/guidedtour/mentor" target="_blank" rel="noreferrer noopener">For mentors</a></div><div><h5>Explorers</h5><a href="https://radgrad.ics.hawaii.edu/explorer/career-goals/data-scientist" target="_blank" rel="noreferrer noopener">Career Goals</a><a href="https://radgrad.ics.hawaii.edu/explorer/interests/dotNet" target="_blank" rel="noreferrer noopener">Interests</a><a href="https://radgrad.ics.hawaii.edu/explorer/opportunities/3d-chip-layouts" target="_blank" rel="noreferrer noopener">Opportunities</a><a href="https://radgrad.ics.hawaii.edu/explorer/courses/ics_361" target="_blank" rel="noreferrer noopener">Courses</a></div><div><h5>Development</h5><a href="https://radgrad.slack.com/" target="_blank" rel="noreferrer noopener">Slack</a><a href="https://github.com/radgrad">GitHub</a><a href="/docusaurus/team.html">Team</a><a href="/docusaurus/contact-us.html">Contact Us</a></div></section><p style="text-align:center;color:white">RadGrad is sponsored by:<br/><a style="text-align:center;color:white" href="http://csdl.ics.hawaii.edu">Collaborative Software Development Laboratory, University of Hawaii</a><br/><a style="text-align:center;color:white" href="http://www.ics.hawaii.edu">Department of Information and Computer Sciences, University of Hawaii</a><br/></p></footer></div></body></html>